/* =========================================================================
   Variables y base (tema oscuro) + tipografía accesible
   ========================================================================= */
:root {
  /* Paleta existente */
  --bg: #0b0f19;
  --card: #121826;
  --muted: #9aa4b2;
  --text: #e5e7eb;
  --primary: #6ee7b7;
  --accent: #60a5fa;
  --danger: #f87171;
  --border: #1f2937;

  /* Tipografía y escala (nuevas) */
  --font-size-base: 16px;
  --font-size-sm: 0.9375rem;   /* 15px */
  --font-size-md: 1.0625rem;   /* 17px */
  --font-size-lg: 1.125rem;    /* 18px */
  --font-size-xl: 1.25rem;     /* 20px */
  --line-height: 1.6;

  /* Radios y sombras suaves (para tarjetas y botones) */
  --radius: 12px;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.25);
  --shadow-md: 0 6px 22px rgba(0,0,0,0.35);
}

* { box-sizing: border-box; }
html, body, #root { height: 100%; }

body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  font-size: var(--font-size-base);
  line-height: var(--line-height);
  background: linear-gradient(180deg, var(--bg), #0e1422);
  color: var(--text);
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Encabezados y párrafos con mejor legibilidad */
h1, h2, h3, h4, h5, h6 {
  margin: 0 0 0.6rem 0;
  line-height: 1.25;
  font-weight: 700;
  letter-spacing: -0.01em;
}
h1 { font-size: 2rem; }        /* 32px */
h2 { font-size: 1.5rem; }      /* 24px */
h3 { font-size: 1.25rem; }     /* 20px */

p {
  margin: 0 0 0.9rem 0;
  font-size: var(--font-size-md);
  color: var(--text);
}

/* Enlaces */
a { color: var(--accent); text-decoration: none; }
a:hover { text-decoration: underline; }

/* =========================================================================
   Layout general y navegación superior
   ========================================================================= */
.app-shell {
  min-height: 100vh;
  display: grid;
  grid-template-rows: auto 1fr;
}

.topnav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  padding: 0.75rem 1rem;
  background: #0f1524;
  border-bottom: 1px solid var(--border);
}

.topnav .brand a {
  font-weight: 700;
  text-decoration: none;
  color: var(--text);
}

.topnav .menu {
  display: flex;
  gap: 0.75rem;
  list-style: none;
  margin: 0;
  padding: 0;
}

.topnav .menu a {
  text-decoration: none;
  padding: 0.35rem 0.6rem;
  border-radius: 0.4rem;
  color: #d5dbea;
}

.topnav .menu a.active {
  background: #141b2c;
  color: #ffffff;
}

.content { padding: 1rem; }
.page-header { max-width: 1400px; margin: 0 auto 1rem auto; }

/* =========================================================================
   Contenedores y grids
   ========================================================================= */
.container {
  max-width: 1400px;
  margin: 24px auto;
  padding: 0 16px;
}

.container-wide {
  max-width: 1600px;
  padding: 0 12px;
}

.grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 16px;
}

/* 40/60 en desktop ancho */
@media (min-width: 1100px) {
  .grid-2-40-60 {
    grid-template-columns: 0.4fr 0.6fr;
    align-items: start;
  }
}

/* Grid 30/70 para priorizar la simulación */
.grid-2-30-70 {
  display: grid;
  grid-template-columns: 30% 70%;
  gap: 16px;
}
@media (max-width: 1100px) {
  .grid-2-30-70 { grid-template-columns: 1fr; }
}

/* Grid dos columnas balanceadas con fallback responsive */
.views-row-2col {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  align-items: start;
}
@media (max-width: 1024px) {
  .views-row-2col { grid-template-columns: 1fr; }
}

/* Fila de vistas lado a lado con flex-wrap */
.views-row {
  display: flex;
  gap: 28px;
  align-items: flex-end;
  flex-wrap: wrap;
}

/* =========================================================================
   Tarjetas
   ========================================================================= */
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 14px;
  box-shadow: var(--shadow-sm);
}
.card h2 { margin: 0 0 10px 0; font-size: 1.35rem; }

hr.sep {
  border: 0;
  border-top: 1px solid var(--border);
  margin: 16px 0;
}

/* =========================================================================
   Inputs y botones — accesibles y cómodos de leer
   ========================================================================= */
input, select, button, textarea {
  background: #0f1625;
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 10px 12px;
  font-size: var(--font-size-md);
  line-height: 1.4;
}

input:focus, select:focus, textarea:focus {
  outline: 0;
  border-color: transparent;
  box-shadow: 0 0 0 4px rgba(96,165,250,0.3); /* halo accesible */
}

/* Estado inválido (si se usa) */
input[aria-invalid="true"], .is-invalid {
  border-color: rgba(248,113,113,0.75);
  box-shadow: 0 0 0 3px rgba(248,113,113,0.25);
}

/* Grupo de input con iconos (útil para ojo de contraseña en el paso 2/2) */
.input-group {
  position: relative;
  display: grid;
}
.input-group > input {
  padding-right: 42px; /* espacio para el botón del ojo */
}
.input-action {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  height: 30px;
  width: 34px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: #cbd5e1;
  background: transparent;
  border: 1px solid transparent;
  border-radius: 8px;
  cursor: pointer;
}
.input-action:hover {
  background: rgba(255,255,255,0.06);
}
.input-action:active {
  transform: translateY(calc(-50% + 1px));
}

button {
  cursor: pointer;
  transition: transform .05s ease-in-out, opacity .2s, filter .15s, box-shadow .15s;
  border-radius: var(--radius);
  box-shadow: none;
}
button:hover { filter: brightness(1.02); }
button:active { transform: translateY(1px); }

button.primary {
  background: var(--accent);
  color: #0b1220;
  border-color: transparent;
}
button.ghost { background: transparent; }
button.danger { background: var(--danger); border-color: transparent; }

.btn-row { display: flex; gap: 8px; flex-wrap: wrap; }

/* ===== Botones deshabilitados (bloqueados) ===== */
button:disabled,
button[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
  filter: grayscale(12%);
  box-shadow: none;
  transform: none;
}

/* Evitar efectos hover/active cuando está deshabilitado */
button:disabled:hover,
button[disabled]:hover,
button:disabled:active,
button[disabled]:active {
  opacity: 0.5;
  transform: none;
}

/* Clase auxiliar por si se quiere reforzar visualmente además del atributo disabled */
.btn-disabled {
  opacity: 0.5 !important;
  cursor: not-allowed !important;
  filter: grayscale(12%) !important;
  box-shadow: none !important;
  pointer-events: none !important;
  transform: none !important;
}

/* =========================================================================
   Tablas generales
   ========================================================================= */
table { width: 100%; border-collapse: collapse; margin-top: 8px; }
th, td { padding: 8px 10px; border-bottom: 1px solid var(--border); }
th { text-align: left; color: var(--muted); font-weight: 600; }
td input { width: 100%; }

/* =========================================================================
   Utilitarios de texto
   ========================================================================= */
.badge { display: inline-block; font-size: 12px; color: #0b1220; background: var(--primary); border-radius: 999px; padding: 2px 10px; margin-left: 8px; }
.small { font-size: 12px; color: var(--muted); }
.subtitle { color: var(--muted); margin-top: -6px; }
.app-title { display: flex; align-items: baseline; gap: 8px; }
.footer { color: var(--muted); font-size: 12px; text-align: center; margin-top: 16px; }
.mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }

/* =========================================================================
   Vistas y contenedores de SVG
   ========================================================================= */
.view-box { overflow: visible; }
.post-empty {
  padding: 16px;
  border: 1px dashed var(--border);
  border-radius: 12px;
  text-align: center;
  margin: 8px 0 0 0;
}
.post-msg { color: var(--muted); }

/* =========================================================================
   Animaciones sutiles
   ========================================================================= */
.fade-out { animation: tankFade 500ms ease-in forwards; }
@keyframes tankFade {
  from { opacity: 1; transform: scale(1); }
  to   { opacity: 0; transform: scale(0.98); }
}

/* =========================================================================
   Tabla de capturas con scroll y encabezado fijo
   ========================================================================= */
.table-wrap {
  width: 100%;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: rgba(0,0,0,0.15);
  overflow: hidden;
}

.table-scroll { max-height: 320px; overflow: auto; }

.table-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 0;
  border-bottom: 1px solid var(--border);
}
.table-row:last-child { border-bottom: none; }

.table-head { font-weight: 600; background: rgba(255,255,255,0.04); }
.table-head.sticky { position: sticky; top: 0; z-index: 1; backdrop-filter: blur(2px); }

.table-cell {
  padding: 10px 12px;
  min-height: 40px;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  text-align: left;
  font-variant-numeric: tabular-nums;
}

/* Responsive de filas tipo grid */
@media (max-width: 680px) {
  .table-row { grid-template-columns: 1fr; }
  .table-head { display: none; }
  .table-cell::before {
    content: attr(data-label);
    color: #94a3b8;
    margin-right: 8px;
  }
}

/* =========================================================================
   Secciones colapsables
   ========================================================================= */
.grid-1 { display: grid; grid-template-columns: 1fr; gap: 16px; }

.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: 0 0 10px 0;
}

.card.collapsed .card-body { display: none; }

.btn-small {
  padding: 6px 10px;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: rgba(255,255,255,0.04);
  color: #cbd5e1;
  cursor: pointer;
}
.btn-small:hover { background: rgba(255,255,255,0.07); }

/* Grid colapsable con efecto hacia la izquierda */
.grid-collapsible {
  --leftCol: 30%;
  display: grid;
  grid-template-columns: var(--leftCol) 1fr;
  gap: 16px;
  transition: grid-template-columns .28s ease;
}
.grid-collapsible.container-collapsed { --leftCol: 0px; }

.left-card {
  overflow: hidden;
  transition:
    transform .28s ease,
    opacity .22s ease,
    padding .0s linear .28s,
    border-width .0s linear .28s;
}
.container-collapsed .left-card {
  transform: translateX(-12px);
  opacity: 0;
  padding: 0;
  border-width: 0;
  pointer-events: none;
}

.right-card { grid-column: 2 / span 1; }
.container-collapsed .right-card { grid-column: 1 / span 2; }
.right-card > .card-body { width: 100%; }

/* =========================================================================
   Sidebar colapsable tipo riel
   ========================================================================= */
.layout-shell {
  --sidebarW: 340px;
  --railW: 22px;
  display: grid;
  grid-template-columns: var(--sidebarW) 1fr;
  gap: 16px;
  transition: grid-template-columns .28s ease;
}
.layout-shell.is-collapsed { --sidebarW: var(--railW); }

.sidebar-card {
  position: relative;
  overflow: hidden;
  padding-right: 8px;
}

.sidebar-content {
  opacity: 1;
  transform: translateX(0);
  transition: opacity .2s ease, transform .28s ease;
}
.layout-shell.is-collapsed .sidebar-content {
  opacity: 0;
  transform: translateX(-12px);
  pointer-events: none;
}

.sidebar-handle {
  position: absolute;
  top: 50%;
  right: 0;
  transform: translateY(-50%);
  width: var(--railW);
  height: 44px;
  border-radius: 10px 0 0 10px;
  background: rgba(255,255,255,0.06);
  border: 1px solid var(--border);
  border-right: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 2;
  box-shadow: 0 2px 8px rgba(0,0,0,0.25);
}
.sidebar-handle:hover { background: rgba(255,255,255,0.10); }

.sidebar-handle svg {
  width: 16px;
  height: 16px;
  opacity: 0.9;
  transition: transform .2s ease;
  fill: currentColor;
  color: #cbd5e1;
}
.layout-shell:not(.is-collapsed) .sidebar-handle svg { transform: rotate(180deg); }

/* =========================================================================
   Panel derecho: tanque y tabla lado a lado
   ========================================================================= */
.right-split {
  display: grid;
  grid-template-columns: minmax(640px, 1fr) 420px;
  gap: 16px;
  align-items: start;
}

/* Columna de tabla bloqueada en ancho */
.right-split > :last-child {
  width: 420px;
  max-width: 420px;
  min-width: 420px;
  justify-self: stretch;
  font-size: 0.92rem;
  line-height: 1.2;
}

/* Tablas internas más cómodas */
.right-split > :last-child table {
  border-collapse: separate;
  border-spacing: 0;
  width: 100%;
}
.right-split > :last-child thead th {
  padding: 10px 12px;
  font-weight: 600;
}
.right-split > :last-child tbody td {
  padding: 10px 12px;
}

/* Acciones en encabezado de tabla */
.right-split > :last-child .table-actions,
.right-split > :last-child .export-actions { gap: 8px; }

/* Responsividad del split */
@media (max-width: 1280px) {
  .right-split { grid-template-columns: minmax(560px, 1fr) 380px; }
  .right-split > :last-child {
    width: 380px; max-width: 380px; min-width: 380px; font-size: 0.9rem;
  }
}
@media (max-width: 900px) {
  .right-split { grid-template-columns: 1fr; }
  .right-split > :last-child { width: 100%; max-width: none; min-width: 0; }
}

/* Ajustes de tabla de capturas */
.captures-table .left { text-align: left; }
.captures-table .row-actions { display: flex; gap: 8px; }

.table-edit-input {
  width: 100%;
  padding: 8px 10px;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 8px;
  color: #e6eef7;
  outline: none;
}
.captures-table tr.editing { background: rgba(255,255,255,0.03); }
.table-footnote { margin-top: 10px; font-size: 0.9rem; color: #aeb7c2; }

/* Tabla con scroll y head sticky */
.table-wrapper {
  max-height: 360px;
  overflow-y: auto;
  overflow-x: hidden;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.02);
}
.captures-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: 0.92rem;
}
.captures-table thead th {
  position: sticky;
  top: 0;
  z-index: 1;
  background: rgba(16, 22, 30, 0.9);
  backdrop-filter: saturate(1.2) blur(2px);
  text-align: left;
  padding: 10px 14px;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}
.captures-table tbody td {
  padding: 10px 14px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}

/* Título corto para contenedores de tanque */
.tank-title {
  font-size: 0.95rem;
  line-height: 1.2;
  margin-bottom: 6px;
}

/* =========================================================================
   Controles de simulación
   ========================================================================= */
.controls-sim { margin-top: 12px; display: flex; flex-direction: column; gap: 10px; }
.controls-row { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.label-inline { font-size: 0.95rem; color: #c9d3df; }
.input-inline {
  padding: 6px 8px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 8px;
  color: #e6eef7;
  outline: none;
}

/* =========================================================================
   Área de gráficas
   ========================================================================= */
.chart-area {
  position: relative;
  width: 100%;
  height: 320px;
  min-height: 320px;
  overflow: hidden;
  box-sizing: border-box;
}
@media (min-height: 900px) {
  .chart-area { height: 380px; min-height: 380px; }
}

/* ===== Overlay de FINALIZADO estilo videojuego ===== */
.finish-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  background: radial-gradient(1200px 800px at 50% 50%, rgba(255,255,255,0.05), rgba(0,0,0,0.6) 60%, rgba(0,0,0,0.8) 100%);
  animation: overlayFade .35s ease-out both;
}

.finish-box {
  text-align: center;
  transform: translateZ(0);
  animation: popIn .45s cubic-bezier(.2,1.2,.2,1) both;
  pointer-events: none;
}

.finish-text {
  font-size: clamp(36px, 6vw, 88px);
  font-weight: 800;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: #fff;
  text-shadow:
    0 2px 0 rgba(0,0,0,0.35),
    0 6px 14px rgba(0,0,0,0.45),
    0 0 28px rgba(96,165,250,0.35);
  background: linear-gradient(90deg, #f59e0b 0%, #f97316 25%, #f43f5e 50%, #60a5fa 75%, #22d3ee 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  position: relative;
  overflow: hidden;
}

.finish-text::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,0.85) 15%, transparent 30%);
  transform: translateX(-120%);
  animation: shine 1.4s ease-out .25s forwards;
}

.finish-subtitle {
  margin-top: 8px;
  font-size: clamp(14px, 2.2vw, 22px);
  font-weight: 600;
  color: #d1d5db;
  text-shadow: 0 2px 10px rgba(0,0,0,0.35);
  letter-spacing: 1px;
}

@keyframes popIn {
  0%   { transform: scale(.85); opacity: 0; }
  60%  { transform: scale(1.06); opacity: 1; }
  100% { transform: scale(1); }
}
@keyframes shine {
  0%   { transform: translateX(-120%); }
  100% { transform: translateX(120%); }
}
@keyframes overlayFade {
  0%   { opacity: 0; }
  100% { opacity: 1; }
}

/* client/src/shared/styles/styles.css */

/* Fondo global oscuro con degradado suave */
html, body, #root {
  height: 100%;
}
body {
  margin: 0;
  background:
    radial-gradient(1000px 600px at 100% 0%, rgba(15,23,42,0.55) 0%, rgba(11,18,32,0) 60%),
    radial-gradient(900px 500px at 0% 100%, rgba(8,47,73,0.45) 0%, rgba(11,18,32,0) 55%),
    linear-gradient(180deg, #0B1220 0%, #0E1628 100%);
  color: #E5E7EB;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Ancho máximo y densidad */
.container-max {
  max-width: 1360px;
  margin: 0 auto;
  padding-inline: 10px;
}

/* Glass utilities */
.glass {
  background: rgba(16, 24, 40, 0.60);
  border: 1px solid rgba(148, 163, 184, 0.25);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: 12px;
}

.glass-soft {
  background: rgba(17, 24, 39, 0.40);
  border: 1px solid rgba(148, 163, 184, 0.20);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-radius: 10px;
}

/* Tarjetas del menú con glass y hover sutil */
.glass-card {
  background: rgba(17, 24, 39, 0.50);
  border: 1px solid rgba(148, 163, 184, 0.22);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: 14px;
  transition: transform .05s ease, box-shadow .15s ease, border-color .15s ease;
}
.glass-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 28px rgba(2, 6, 23, .35);
  border-color: rgba(148, 163, 184, 0.32);
}

/* Chips */
.chip-info {
  display: inline-block;
  font-size: 12px;
  font-weight: 600;
  color: #93C5FD;
  background: rgba(59, 130, 246, 0.15);
  border: 1px solid rgba(59, 130, 246, 0.35);
  padding: 2px 8px;
  border-radius: 999px;
  white-space: nowrap;
}

/* Ajustes de densidad y tipografía */
h1, h2, h3 { margin: 0; }
section, header, nav { margin: 0; }

/* Ajuste de espaciado entre el título H1 del experimento y la línea de modelo/atajos */
.exp-content h1 {
  margin-bottom: 10px; /* separa el H1 del bloque siguiente */
}
.exp-content h1 + * {
  margin-top: 8px !important; /* aumenta aire por si el siguiente elemento trae márgenes colapsados */
}

/* Panel de experimento consistente (oscuro + glass) */
.exp-panel {
  background: rgba(17, 24, 39, 0.50);
  border: 1px solid rgba(148, 163, 184, 0.22);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: 14px;
  padding: 12px;
}

/* Espaciado de títulos dentro de vistas de experimento */
.exp-content h1 {
  margin-bottom: 10px;
}
.exp-content h1 + * {
  margin-top: 8px !important;
}

/* MAS: ocultar cabecera/botón redundante si existe (la navegación ya está en Tabs) */
.exp-content button[title*="Volver a Spring"],
.exp-content button[aria-label*="Volver a Spring"] {
  display: none !important;
}
